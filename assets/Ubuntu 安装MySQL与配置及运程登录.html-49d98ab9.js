import{_ as s,o as a,c as n,e}from"./app-2ff14493.js";const i={},l=e(`<h1 id="ubuntu-安装mysql与配置及运程登录" tabindex="-1"><a class="header-anchor" href="#ubuntu-安装mysql与配置及运程登录" aria-hidden="true">#</a> Ubuntu 安装MySQL与配置及运程登录</h1><h2 id="安装mysql" tabindex="-1"><a class="header-anchor" href="#安装mysql" aria-hidden="true">#</a> 安装MySql</h2><h3 id="更新列表" tabindex="-1"><a class="header-anchor" href="#更新列表" aria-hidden="true">#</a> 更新列表</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> update
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="安装mysql服务器" tabindex="-1"><a class="header-anchor" href="#安装mysql服务器" aria-hidden="true">#</a> 安装MySql服务器</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> mysql-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在安装过程中，系统将提示您创建root密码。选择一个安全的，并确保记住它，因为后面需要用到这个密码。</p><h3 id="配置mysql" tabindex="-1"><a class="header-anchor" href="#配置mysql" aria-hidden="true">#</a> 配置MySQL</h3><p>运行MySQL初始化安全脚本</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> mysql_secure_installation
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>你将会被要求配置 VALIDATE PASSWORD PLUGIN 它被用来测试 MySQL 用户密码的强度,并且提高安全性:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Securing the MySQL server deployment.
Connecting to MySQL using a blank password.

VALIDATE PASSWORD COMPONENT can be used to test passwords
and improve security. It checks the strength of password
and allows the users to set only those passwords which are
secure enough. Would you like to setup VALIDATE PASSWORD component?

Press y|Y for Yes, any other key for No: y
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>有三个级别的密码验证策略,低级,中级,高级.如果你想设置验证密码插件,按 <strong>y</strong> 或者其他任何按键,移动到下一个步骤:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>There are three levels of password validation policy:

LOW    Length <span class="token operator">&gt;=</span> <span class="token number">8</span>
MEDIUM Length <span class="token operator">&gt;=</span> <span class="token number">8</span>, numeric, mixed case, and special characters
STRONG Length <span class="token operator">&gt;=</span> <span class="token number">8</span>, numeric, mixed case, special characters and dictionary <span class="token function">file</span>

Please enter <span class="token number">0</span> <span class="token operator">=</span> LOW, <span class="token number">1</span> <span class="token operator">=</span> MEDIUM and <span class="token number">2</span> <span class="token operator">=</span> STRONG: <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>下一次被提示时,你将被要求为 MySQL root 用户设置一个密码:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Please <span class="token builtin class-name">set</span> the password <span class="token keyword">for</span> root here.

New password:

Re-enter new password:
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你设置了验证密码插件,这个脚本将会显示你的新密码强度.输入 <strong>y</strong> 确认密码:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Estimated strength of the password: 50
Do you wish to continue with the password provided?(Press y|Y for Yes, any other key for No) : y
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>下一步,你将被要求移除任何匿名用户,限制 root 用户访问本地机器,移除测试数据库并且重新加载权限表.你应该对所有的问题回答 <strong>y</strong></p><h5 id="方案一" tabindex="-1"><a class="header-anchor" href="#方案一" aria-hidden="true">#</a> 方案一:</h5><ul><li>完成后,进入 mysql shell.</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>由于新版的 MySQL 不推荐使用 root 远程登录.所以我们创建一个新用户.</p><ul><li>创建用户</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>use mysql<span class="token punctuation">;</span>
create user <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;%&#39;</span> identified by <span class="token string">&#39;密码&#39;</span><span class="token punctuation">;</span>
flush privileges<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>其中 localhost 表示本机访问,若是需要任意 IP 访问,可以替换成 %</li><li>修改密码</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>alter user <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;%&#39;</span> identified by <span class="token string">&#39;新密码&#39;</span><span class="token punctuation">;</span>
flush privileges<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>授权</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>grant all privileges on *.* to <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;%&#39;</span> with grant option<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>with gran option 表示该用户可给其它用户赋予权限,但不可能超过该用户已有的权限 比如 A 用户有 select,insert 权限,也可给其它用户赋权,但它不可能给其它用户赋 delete 权限,除了 select,insert 以外的都不能,这句话可加可不加,视情况而定.</p><p>all privileges 可换成 select,update,insert,delete,drop,create 等操作,如:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>grant select,insert,update,delete on *.* to <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>第一个*表示通配数据库,可指定新建用户只可操作的数据库,如:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>grant all privileges on 数据库.* to <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>第二个*表示通配表,可指定新建用户只可操作的数据库下的某个表,如:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>grant all privileges on 数据库.指定表名 to <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>查看用户授权信息</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>show grants <span class="token keyword">for</span> <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>撤销权限</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 用户有什么权限就撤什么权限</span>
revoke all privileges on *.* from <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>删除用户</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>drop user <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="方案二" tabindex="-1"><a class="header-anchor" href="#方案二" aria-hidden="true">#</a> 方案二:</h5><ul><li>先进入 MySQL</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>输入密码进入后,执行如下命令,调整 root 账户</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>use mysql<span class="token punctuation">;</span>
<span class="token keyword">select</span> host, user, authentication_string, plugin from user<span class="token punctuation">;</span>
update user <span class="token builtin class-name">set</span> <span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&#39;%&#39;</span> where <span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">;</span>
alter user <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;%&#39;</span> identified with mysql_native_password by <span class="token string">&#39;你的密码&#39;</span><span class="token punctuation">;</span>
flush privileges<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>再次执行如下命令查看 root 账户的可访问 host 是否变成%</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">select</span> host, user, authentication_string, plugin from user<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>重启 MySQL 服务</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> mysql restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="mysql数据库基本使用" tabindex="-1"><a class="header-anchor" href="#mysql数据库基本使用" aria-hidden="true">#</a> MySQL数据库基本使用</h2><h3 id="启动mysql数据库服务" tabindex="-1"><a class="header-anchor" href="#启动mysql数据库服务" aria-hidden="true">#</a> 启动MySQL数据库服务</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> mysql start
或
<span class="token function">sudo</span> systemctl start mysql.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重启mysql数据库服务" tabindex="-1"><a class="header-anchor" href="#重启mysql数据库服务" aria-hidden="true">#</a> 重启MySQL数据库服务</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> mysql restart
或
<span class="token function">sudo</span> systemctl restart mysql.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="停止mysql数据库服务" tabindex="-1"><a class="header-anchor" href="#停止mysql数据库服务" aria-hidden="true">#</a> 停止MySQL数据库服务</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> mysql stop
或
<span class="token function">sudo</span> systemctl stop mysql.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查看mysql运行状态" tabindex="-1"><a class="header-anchor" href="#查看mysql运行状态" aria-hidden="true">#</a> 查看MySQL运行状态</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> mysql status
或
<span class="token function">sudo</span> systemctl status mysql.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="设置mysql服务开机自启动" tabindex="-1"><a class="header-anchor" href="#设置mysql服务开机自启动" aria-hidden="true">#</a> 设置MySQL服务开机自启动</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> mysql <span class="token builtin class-name">enable</span>
或
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> mysql.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="停止mysql服务开机自启动" tabindex="-1"><a class="header-anchor" href="#停止mysql服务开机自启动" aria-hidden="true">#</a> 停止MySQL服务开机自启动</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> mysql disable
或
<span class="token function">sudo</span> systemctl disable mysql.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="mysql的配置文件" tabindex="-1"><a class="header-anchor" href="#mysql的配置文件" aria-hidden="true">#</a> MySQL的配置文件</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vim</span> /etc/mysql/mysql.conf.d/mysqld.cnf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="配置mysql远程登录" tabindex="-1"><a class="header-anchor" href="#配置mysql远程登录" aria-hidden="true">#</a> 配置MySQL远程登录</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> <span class="token function">sudo</span> <span class="token function">vim</span> /etc/mysql/mysql.conf.d/mysqld.cnf
修改bind-address为 <span class="token number">0.0</span>.0.0 后保存退出.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,68),d=[l];function r(t,c){return a(),n("div",null,d)}const u=s(i,[["render",r],["__file","Ubuntu 安装MySQL与配置及运程登录.html.vue"]]);export{u as default};
